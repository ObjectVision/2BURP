////////////////////////////////////////////////////////////////////////////////////////////
//            (C) Configuration Towards an Urban Preview - 2UP 2021                       //
//         Netherlands Environmental Assessment Agency http://www.pbl.nl/en/contact       //
//  This work is licensed under a Creative Commons Attribution 4.0 International License  //
//              CC BY-SA 4.0 https://creativecommons.org/licenses/by-sa/4.0/              //
////////////////////////////////////////////////////////////////////////////////////////////

// Author:   Bas van Bemmel
// Function:

container Export
{
	attribute</SourceData/RegionalUnits/Countries/Country> Country_grid (domain) :=SourceData/RegionalUnits/Countries/Country_grid, StorageName= "='%LocalDataProjDir%/results/'+GridName+'/country.tif'";
	attribute<km2>                                     areakm2      (domain) :=domain/area, StorageName= "='%LocalDataProjDir%/results/'+GridName+'/areakm2.tif'";

	unit<uint8> Country :=SourceData/RegionalUnits/Countries/Country 
	{
		attribute<uint8>   ID            := SourceData/RegionalUnits/Countries/Country/id;
		attribute<string>  ISO3          := SourceData/RegionalUnits/Countries/Country/ISO3;
		attribute<string>  Name_cor      := SourceData/RegionalUnits/Countries/Country/Name_cor;
		attribute<string>  Continent_cor := SourceData/RegionalUnits/Countries/Country/Continent_cor;
		attribute<km2>     areakm2       := SourceData/RegionalUnits/Countries/Country/area;
	}

	unit<uint32> variable_country_export := SubItem_PropValues(Country,'Name');
	container export_country_csv := Report/WriteTable8ToCSV(Country , AsList(variable_country_export/Name, ';'), '%LocalDataProjDir%/results/'+GridName+'/country.csv');
}