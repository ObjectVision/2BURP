////////////////////////////////////////////////////////////////////////////////////////////
//            (C) Configuration Towards an Urban Preview - 2UP 2021                       //
//         Netherlands Environmental Assessment Agency http://www.pbl.nl/en/contact       //
//  This work is licensed under a Creative Commons Attribution 4.0 International License  //
//              CC BY-SA 4.0 https://creativecommons.org/licenses/by-sa/4.0/              //
////////////////////////////////////////////////////////////////////////////////////////////

// Author:   Bas van Bemmel
// Function:

container coef2gtopo
{
	unit<uint8> Country     := Input/administrative/Countries/Country 
	{
		attribute<uint8>   Continent_id       := rlookup(Input/administrative/Countries/Country/Continent_cor,continent_coef/name);

		attribute<float32> TotalPopulationDensity1990_8dir_coef     := rjoin(Input/administrative/Countries/Country/Continent_cor,continent_coef/name,continent_coef/TotalPopulationDensity1990_8dir_coef);
		attribute<float32> DistanceToCoast_coef                     := rjoin(Input/administrative/Countries/Country/Continent_cor,continent_coef/name,continent_coef/DistanceToCoast_coef);
		attribute<float32> DistanceToRiver_coef                     := rjoin(Input/administrative/Countries/Country/Continent_cor,continent_coef/name,continent_coef/DistanceToRiver_coef);
		attribute<float32> DistanceToLake_coef                      := rjoin(Input/administrative/Countries/Country/Continent_cor,continent_coef/name,continent_coef/DistanceToLake_coef);
		attribute<float32> Elevation_coef                           := rjoin(Input/administrative/Countries/Country/Continent_cor,continent_coef/name,continent_coef/Elevation_coef);
		attribute<float32> Slope_coef                               := rjoin(Input/administrative/Countries/Country/Continent_cor,continent_coef/name,continent_coef/Slope_coef);
		attribute<float32> TRI_coef                                 := rjoin(Input/administrative/Countries/Country/Continent_cor,continent_coef/name,continent_coef/TRI_coef);
		attribute<float32> TravelTime_coef                          := rjoin(Input/administrative/Countries/Country/Continent_cor,continent_coef/name,continent_coef/TravelTime_coef);
		attribute<float32> ProtectedArea_coef                       := rjoin(Input/administrative/Countries/Country/Continent_cor,continent_coef/name,continent_coef/ProtectedArea_coef);
		attribute<float32> FloodProneArea_coef                      := rjoin(Input/administrative/Countries/Country/Continent_cor,continent_coef/name,continent_coef/FloodProneArea_coef);
		attribute<float32> Earthquake_coef                          := rjoin(Input/administrative/Countries/Country/Continent_cor,continent_coef/name,continent_coef/Earthquake_coef);
		attribute<float32> Landslide_PR_coef                        := rjoin(Input/administrative/Countries/Country/Continent_cor,continent_coef/name,continent_coef/Landslide_PR_coef);
		attribute<float32> Landslide_EQ_coef                        := rjoin(Input/administrative/Countries/Country/Continent_cor,continent_coef/name,continent_coef/Landslide_EQ_coef);
		attribute<float32> DistanceMainRoads_coef                   := rjoin(Input/administrative/Countries/Country/Continent_cor,continent_coef/name,continent_coef/DistanceMainRoads_coef);
		attribute<float32> DistanceSecondaryRoads_coef              := rjoin(Input/administrative/Countries/Country/Continent_cor,continent_coef/name,continent_coef/DistanceSecondaryRoads_coef);

		attribute<float32> Constant_coef                            := rjoin(Input/administrative/Countries/Country/Continent_cor,continent_coef/name,continent_coef/Constant_coef);
	}

	unit<wpoint> gtopo     := Input/gtopo
	{
		attribute<float32> TotalPopulationDensity1990_8dir_coef_grid      := MakeDefined(Country/TotalPopulationDensity1990_8dir_coef[Input/administrative/Countries/Country_grid],0f);
		attribute<float32> DistanceToCoast_coef_grid                      := MakeDefined(Country/DistanceToCoast_coef[Input/administrative/Countries/Country_grid],0f);
		attribute<float32> DistanceToRiver_coef_grid                      := MakeDefined(Country/DistanceToRiver_coef[Input/administrative/Countries/Country_grid],0f);
		attribute<float32> DistanceToLake_coef_grid                       := MakeDefined(Country/DistanceToLake_coef[Input/administrative/Countries/Country_grid],0f);
		attribute<float32> Elevation_coef_grid                            := MakeDefined(Country/Elevation_coef[Input/administrative/Countries/Country_grid],0f);
		attribute<float32> Slope_coef_grid                                := MakeDefined(Country/Slope_coef[Input/administrative/Countries/Country_grid],0f);
		attribute<float32> TRI_coef_grid                                  := MakeDefined(Country/TRI_coef[Input/administrative/Countries/Country_grid],0f);
		attribute<float32> TravelTime_coef_grid                           := MakeDefined(Country/TravelTime_coef[Input/administrative/Countries/Country_grid],0f);
		attribute<float32> ProtectedArea_coef_grid                        := MakeDefined(Country/ProtectedArea_coef[Input/administrative/Countries/Country_grid],0f);
		attribute<float32> FloodProneArea_coef_grid                       := MakeDefined(Country/FloodProneArea_coef[Input/administrative/Countries/Country_grid],0f);
		attribute<float32> Earthquake_coef_grid                           := MakeDefined(Country/Earthquake_coef[Input/administrative/Countries/Country_grid],0f);
		attribute<float32> Landslide_PR_coef_grid                         := MakeDefined(Country/Landslide_PR_coef[Input/administrative/Countries/Country_grid],0f);
		attribute<float32> Landslide_EQ_coef_grid                         := MakeDefined(Country/Landslide_EQ_coef[Input/administrative/Countries/Country_grid],0f);
		attribute<float32> DistanceMainRoads_coef_grid                    := MakeDefined(Country/DistanceMainRoads_coef[Input/administrative/Countries/Country_grid],0f);
		attribute<float32> DistanceSecondaryRoads_coef_grid               := MakeDefined(Country/DistanceSecondaryRoads_coef[Input/administrative/Countries/Country_grid],0f);

		attribute<float32> Constant_coef_grid                             := MakeDefined(Country/Constant_coef[Input/administrative/Countries/Country_grid],0f);
	}
}